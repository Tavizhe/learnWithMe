# Laravel

## Pre Requirements

To start first install Xampp application then add php directory to your path in environment variables. Later check `php -v` in command line (CMD) to see the right version of php.

Next is time to install Composer. First download `Composer-Setup.exe` from [Composer Site](https://getcomposer.org/download/) then simply install it. After check composer version with Command Line with following command `composer -V`.

## Creating New Laravel Project Using Composer

To create a new project using Composer run in Command Line:

```shell
cd C:\xampp\htdocs
composer create-project laravel/laravel="*" Project_Name
# don't forget to add your exact php version instead of "*".
```

In order to use local host to check your made website use following command:

```shell
php artisan serve
```

by using this command in Command line or Power Shell (It's better to be used vscode terminal), an Host with an IP will be shown like `http://127.0.0.1:8000`. by clicking on it you will be directed to desired laravel website.

## Laravel Root Directory Structure

| Directory | Description                                                                                                                                    |
| --------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| app       | The app directory holds the base code for your Laravel application.                                                                            |
| bootstrap | The bootstrap directory contains all the bootstrapping scripts used for your application.                                                      |
| config    | The config directory holds all your project configuration files (.config).                                                                     |
| database  | The database directory contains your database files.                                                                                           |
| public    | The public directory helps start your Laravel project and maintains other necessary files such as JavaScript, CSS, and images of your project. |
| resources | The resources directory holds all the Sass files, language (localization) files, and templates (if any).                                       |
| routes    | The routes directory contains all your definition files for routing, such as console.php, api.php, channels.php, etc.                          |
| storage   | The storage directory holds your session files, cache, compiled templates, and miscellaneous files generated by the framework.                 |
| test      | The test directory holds all your test cases.                                                                                                  |
| vendor    | The vendor directory holds all composer dependency files.                                                                                      |

- You will need the `.env` file in the project's root directory to configure your application's environment. You can configure the database for your application using the `config/database.php` file of your project.

### App Directory Structure

| Directory     | Description                                                                                                                                                                                                                |
| ------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Console       | The Console directory contains all your project artisan commands.                                                                                                                                                          |
| Events        | The Events directory holds event files that your laravel application may pop up. Events are used for sending messages or signals to other parts of the laravel project that any action has taken place within the project. |
| Exceptions    | The Exceptions directory holds your laravel project's exception handling files, which handle all the exceptions thrown by your Laravel project.                                                                            |
| Http          | The Http directory holds different filters, requests, and controllers.                                                                                                                                                     |
| Jobs          | The Jobs directory holds all lineup jobs in this directory. But it does not get created initially; instead, you need to type and run this artisan command:`make:job`                                                       |
| Listeners     | The Listeners directory holds all your project's handler classes used for receiving and handling events.                                                                                                                   |
| Mail          | The Main directory holds all the emails sent through your Laravel project, and this directory needs to be created using the command: `make:mail`                                                                           |
| Notifications | The Notifications directory contains all your transactional notifications sent through your Laravel project, and this directory needs to be created using the command: `make:notification`                                 |
| Policies      | The policies directory holds different policies for your laravel project.                                                                                                                                                  |
| Providers     | The Providers directory is used to contain different service providers.                                                                                                                                                    |
| Rules         | The Rules directory holds all the different objects related to custom validation rules, and this directory needs to be created using the command: `make:rule`                                                              |

### Artisan

Artisan is a command-line interface (CLI) included with the Laravel PHP framework that provides several helpful commands for speeding up development workflows. use `php artisan list`
to see all commands.

> we can make our own commands and add them in artisan. first make scaffolding `php artisan make:command SendEmails` then implement your php codes in it.

## Routing

Routes are defined inside the Route folder in `api.php` and `web.php` files. in api.php we use to just use to return JSON in API formats.
Routing in Laravel allows you to route all your application requests to their appropriate controller. The application's route file gets defined in the app/Http/routes.php file. The general routing in Laravel for each of the possible requests looks something like this:

> Use `use Illuminate\Support\Facades\Route` in order to use routes in project.

![Routes in laravel](laravel/1.png)

```php
// http://localhost/
//first static method used with get
Route:: get ('/', function () {// '/' is the uri (means anything that comes after your root domain) and func is a controller that can be a method in our class or anonymous function
   return 'Welcome to index';
})->('Home.index'); //this is how you can name your routes so they make sense by reading it

// http://localhost/user/dashboard

Route:: post('user/dashboard', function () {
   return 'Welcome to dashboard';
});
// http://localhost/user/add

Route:: put('user/add', function () {
//
});
// http://localhost/post/example

Route:: delete('post/example', function () {
//
})->('Home.Post');
```

- command `php artisan route:list` shows all of routes in our project.

### The routing happens in three different steps

1. First of all, you have to create and run the root URL of your project.
2. The URL you run needs to be matched exactly with your method defined in the root.php file.
3. The function invokes the template files. It then calls the `view()` function with the file name located in `resources/views/`.

#### Route Parameters

Laravel provides two ways of capturing the passed parameter:

- Required parameter (can be used for ids, postNumbers, ...): You sometimes had to work with a segment(s) of your project's URL (Uniform Resource Locator). Route parameters are encapsulated within {} (curly-braces) with alphabets inside. Let us take an example where you have to capture the customer's ID or employee from the generated URL. For Example:

```php
Route :: get ('posts/{id}', function ($id) {
    echo 'Blog post '.$id;
});
```

- Optional Parameter (can be useful for time when name parameter is not provided): Many parameters do not remain present within the URL, but the developers had to use them. So such parameters get indicated by a "?" (question mark sign) following the parameter's name. For Example:

```php
Route :: get ('emp/{name?}', function ($name = 'Guest') {
    echo $name;
});
Route :: get ('/recent-posts/{days_ago?}', function ($daysAgo = 20) { // it is necessary to have argument in optional parameters.
return 'Posts from ' . $daysAgo .' days ago';
});
```

> Note - always name your routes!

In last Example the required parameter have to be a number, we can specify in route so it always be a number like Example bellow:

```php
Route :: get ('posts/{id}', function ($id) {
    echo 'Blog post '.$id;
})-> where([
    'id' => [0-9]+ // by using regular expressions. + means it should have a length of at least 1.
])->name('posts.show'); // don't forget to name your routes :)
```

> Note - we all know that ids are always a number. we should not always write `where(['id' => [0-9]+])`. To avoid repeating the code we do it in global, editing `app/provider/RouteServiceProvider.php` by adding repeated code as a pattern in line 49. For Example:`Route::pattern('id', '[0-9]+');`
